<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="style.css">
	<title>Tip calculator</title>	
</head>
<body>
	
	<h1>Tip calculator</h1>
	
	<form id="fTipCalculator" onsubmit="return calculateTip();" >

		<ol>
			<li>
				<label for="bill">How much was the bill?</label>
				<input  id="bill" type="text" name="bill" placeholder="Bill amount"> €
			</li>

			<li>
				<label for="service">How was the service</label>
				<select id="service">
					<option disabled selected value="0">Choose an option</option>
					<option value="0.3">Great (30%)</option>
					<option value="0.2">Good (20%)</option>
					<option value="0.15">OK (15%)</option>
					<option value="0.10">Bad (10%)</option>
					<option value="0.05">Horrible (5%)</option>
				</select>
			</li>
			
			<li>
				<label for="people">How many people are sharing the bill?</label>
				<input type="text" id="people" placeholder="Number of people"> people
			</li>
	
			<li><input type="submit" id="calculate" value="Calculate"></li>
	</form>
	
	<div id="total" >

		<h2>TIP AMOUNT: <span id="tip">0.00</span> €<span id="each" class="off">(each)</span></h2>
		
		<div id="alerts"></div>
	</div>
	
</body>
</html>

<script type="text/javascript">

	
		function calculateTip() {
			
			var obj_bill = document.getElementById("bill");
			var bill = obj_bill.value;
			
			var obj_service = document.getElementById("service");
			var service = obj_service.value;
			
			var obj_people = document.getElementById("people");
			var people = obj_people.value;

			var alerts = document.getElementById("alerts");
			var each = document.getElementById("each");
			var tip = document.getElementById("tip");
			
			alerts.innerHTML = ""; 
			each.classList.remove("on");
			var alert = "";
			var error = [];
			var total = 0;
			
	
			validateField(obj_bill, "empty");
			validateField(obj_service, "empty");
			
			
			if (error.length === 0) {

				if(people === "" || people <=1){

					error = [];
					people = 1, obj_people.value = people;
					each.className = "off";

					showResult();	
				
				}  else if(people > 1) {
					
					error = [];
					each.className = "on";
					
					showResult();

				}

			} else {

				alerts.innerHTML = "Please enter values";
				
					error.forEach(field => {
					  field.className = "error";
					});

				tip.innerHTML = 0.00;
				each.className = "off";

			}
				
			function calculateTotal() {
				
				total = (bill * service) / people;
				total = Math.round(total * 100) / 100;
				total = total.toFixed(2);

				return total;
			}

			function showResult() {

				tip.innerHTML = calculateTotal();
			}
			function validateField(field, type){

				switch (type) {
					case 'empty':

						if(
							field.value === "" || 
							field.value == 0 || 
							field.value === 0) {
							
							error.push(field);
						} else {
							
							
							field.classList.remove("error");
						}

					break;
				}
				
			}
			
			return false;
		}

	</script>